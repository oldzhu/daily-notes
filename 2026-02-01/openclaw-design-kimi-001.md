I'll analyze the OpenClaw repository to understand its architecture and design principles for building a self-evolving agent. Let me explore the codebase.
Let me explore more details about the skills system and self-evolution mechanisms.
Let me look at a specific skill example to understand the SKILL.md format better.
Now I have a comprehensive understanding of OpenClaw's architecture. Let me provide you with a detailed analysis.

---

## OpenClaw Architecture: Deep Dive for Self-Evolving Agent Design | OpenClaw æ¶æ„ï¼šè‡ªè¿›åŒ–æ™ºèƒ½ä½“è®¾è®¡æ·±åº¦è§£æ

### 1. High-Level Architecture Overview | é«˜å±‚æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACE LAYER                               â”‚
â”‚  (WhatsApp, Telegram, Slack, Discord, iMessage, WebChat, VS Code, etc.)     â”‚
â”‚                      (WhatsAppã€Telegramã€Slackã€Discordã€iMessageã€WebChatã€VS Code ç­‰)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼ WebSocket/HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GATEWAY (Control Plane)                         â”‚
â”‚                      Central WebSocket Server (Port 18789)                   â”‚
â”‚                        ä¸­å¤® WebSocket æœåŠ¡å™¨ï¼ˆç«¯å£ 18789ï¼‰                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Channel    â”‚  â”‚   Agent     â”‚  â”‚   Plugin    â”‚  â”‚    Memory/Skills    â”‚  â”‚
â”‚  â”‚  Manager    â”‚  â”‚   Runtime   â”‚  â”‚   System    â”‚  â”‚    Registry         â”‚  â”‚
â”‚  â”‚  é¢‘é“ç®¡ç†å™¨  â”‚  â”‚   ä»£ç†è¿è¡Œæ—¶ â”‚  â”‚   æ’ä»¶ç³»ç»Ÿ   â”‚  â”‚    æ³¨å†Œè¡¨           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Session   â”‚  â”‚   Sandbox   â”‚  â”‚   Cron/     â”‚  â”‚    Node Bridge      â”‚  â”‚
â”‚  â”‚   Manager   â”‚  â”‚   (Docker)  â”‚  â”‚   Hooks     â”‚  â”‚    (iOS/Android)    â”‚  â”‚
â”‚  â”‚   ä¼šè¯ç®¡ç†å™¨ â”‚  â”‚   (Docker)  â”‚  â”‚   å®šæ—¶/é’©å­  â”‚  â”‚    èŠ‚ç‚¹æ¡¥æ¥          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼ JSON-RPC / ACP Protocol
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AGENT RUNTIME (Pi Agent Core)                      â”‚
â”‚                              ä»£ç†è¿è¡Œæ—¶ï¼ˆPi Agent Coreï¼‰                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  System Prompt Assembly (AGENTS.md + SOUL.md + TOOLS.md + Skills)       â”‚ â”‚
â”‚  â”‚  ç³»ç»Ÿæç¤ºç»„è£…ï¼ˆAGENTS.md + SOUL.md + TOOLS.md + æŠ€èƒ½ï¼‰                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Tool Execution Layer                                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  read   â”‚ â”‚  write  â”‚ â”‚  edit   â”‚ â”‚  exec   â”‚ â”‚ browser â”‚ â”‚ canvas â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  è¯»å–   â”‚ â”‚  å†™å…¥   â”‚ â”‚  ç¼–è¾‘   â”‚ â”‚  æ‰§è¡Œ   â”‚ â”‚ æµè§ˆå™¨  â”‚ â”‚ ç”»å¸ƒ   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚message  â”‚ â”‚ sessionsâ”‚ â”‚  cron   â”‚ â”‚ gateway â”‚ â”‚  nodes  â”‚ â”‚ memory â”‚ â”‚ â”‚
â”‚  â”‚  â”‚æ¶ˆæ¯     â”‚ â”‚ ä¼šè¯    â”‚ â”‚ å®šæ—¶    â”‚ â”‚ ç½‘å…³    â”‚ â”‚ èŠ‚ç‚¹    â”‚ â”‚ è®°å¿†   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼ API Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXTERNAL LLM PROVIDERS                               â”‚
â”‚                    (Anthropic Claude, OpenAI, Google, Local)                 â”‚
â”‚                         å¤–éƒ¨å¤§è¯­è¨€æ¨¡å‹æä¾›å•†                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Core Design Philosophy: "Files as Source of Truth" | æ ¸å¿ƒè®¾è®¡ç†å¿µï¼š"æ–‡ä»¶å³çœŸç›¸æ¥æº"

The most important architectural decision in OpenClaw is that **everything is files** â€” no hidden databases, no opaque state.

OpenClaw æœ€é‡è¦çš„æ¶æ„å†³ç­–æ˜¯**ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶**â€”â€”æ²¡æœ‰éšè—çš„æ•°æ®åº“ï¼Œæ²¡æœ‰ä¸é€æ˜çŠ¶æ€ã€‚

```
~/.openclaw/                              # Agent workspace (ä»£ç†å·¥ä½œç©ºé—´)
â”œâ”€â”€ openclaw.json                         # Main configuration (ä¸»é…ç½®)
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ <agentId>/
â”‚       â”œâ”€â”€ agent/
â”‚       â”‚   â”œâ”€â”€ auth-profiles.json        # OAuth/API credentials (OAuth/API å‡­è¯)
â”‚       â”‚   â””â”€â”€ auth.json                 # Runtime auth cache (è¿è¡Œæ—¶è®¤è¯ç¼“å­˜)
â”‚       â”œâ”€â”€ sessions/
â”‚       â”‚   â””â”€â”€ agent-<agentId>.json      # Session transcripts (ä¼šè¯è®°å½•)
â”‚       â””â”€â”€ workspace/                    # Agent workspace (ä»£ç†å·¥ä½œåŒº)
â”‚           â”œâ”€â”€ AGENTS.md                 # Operating instructions (æ“ä½œæŒ‡ä»¤)
â”‚           â”œâ”€â”€ SOUL.md                   # Personality/persona (ä¸ªæ€§/äººè®¾)
â”‚           â”œâ”€â”€ TOOLS.md                  # Tool usage guidance (å·¥å…·ä½¿ç”¨æŒ‡å—)
â”‚           â”œâ”€â”€ USER.md                   # User identity (ç”¨æˆ·èº«ä»½)
â”‚           â”œâ”€â”€ IDENTITY.md               # Agent identity (ä»£ç†èº«ä»½)
â”‚           â”œâ”€â”€ MEMORY.md                 # Curated long-term memory (ç²¾é€‰é•¿æœŸè®°å¿†)
â”‚           â”œâ”€â”€ BOOTSTRAP.md              # First-run behavior (é¦–æ¬¡è¿è¡Œè¡Œä¸º)
â”‚           â”œâ”€â”€ HEARTBEAT.md              # Proactive check-ins (ä¸»åŠ¨æ£€æŸ¥)
â”‚           â”œâ”€â”€ TOOL.md                   # Tool guidance (å·¥å…·æŒ‡å¯¼)
â”‚           â”œâ”€â”€ memory/                   # Daily logs (æ¯æ—¥æ—¥å¿—)
â”‚           â”‚   â””â”€â”€ YYYY-MM-DD.md
â”‚           â””â”€â”€ skills/                   # Workspace-specific skills (å·¥ä½œåŒºç‰¹å®šæŠ€èƒ½)
â”‚               â””â”€â”€ <skill>/
â”‚                   â””â”€â”€ SKILL.md          # Skill definition (æŠ€èƒ½å®šä¹‰)
â””â”€â”€ skills/                               # Shared managed skills (å…±äº«æ‰˜ç®¡æŠ€èƒ½)
```

---

### 3. The Skill System: How OpenClaw Evolves | æŠ€èƒ½ç³»ç»Ÿï¼šOpenClaw å¦‚ä½•è¿›åŒ–

#### 3.1 Skill Structure | æŠ€èƒ½ç»“æ„

Each skill is a folder containing `SKILL.md` with YAML frontmatter:

æ¯ä¸ªæŠ€èƒ½æ˜¯ä¸€ä¸ªåŒ…å«å¸¦ YAML å‰ç½®å…ƒæ•°æ®çš„ `SKILL.md` çš„æ–‡ä»¶å¤¹ï¼š

```markdown
---
name: secure-gmail
description: Read emails and create drafts using Composio managed authentication.
metadata:
  moltbot:
    emoji: ğŸ“§
    requires:
      bins: ["python3"]
      env: ["COMPOSIO_API_KEY"]
      config: ["browser.enabled"]
---

# Secure Gmail Skill

## Authentication
This skill requires the `COMPOSIO_API_KEY` environment variable...

## Usage Examples
- "Check my latest emails"
- "Draft a reply to John about the meeting"

## Implementation
When the user asks about emails:
1. Use the Composio API to fetch recent emails
2. Present them in a readable format
3. For drafting, create a draft via Composio (do NOT send)
```

#### 3.2 Skill Loading Hierarchy | æŠ€èƒ½åŠ è½½å±‚çº§

```
Precedence (highest â†’ lowest): ä¼˜å…ˆçº§ï¼ˆæœ€é«˜ â†’ æœ€ä½ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. <workspace>/skills/          (per-agent, highest)  â”‚
â”‚     <å·¥ä½œåŒº>/skills/              ï¼ˆæ¯ä¸ªä»£ç†ï¼Œæœ€é«˜ï¼‰      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. ~/.openclaw/skills/          (managed/local)       â”‚
â”‚     ~/.openclaw/skills/          ï¼ˆæ‰˜ç®¡/æœ¬åœ°ï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. <openclaw>/skills/           (bundled, lowest)     â”‚
â”‚     <openclaw>/skills/           ï¼ˆå†…ç½®ï¼Œæœ€ä½ï¼‰          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4. plugins.load.extraDirs[]     (extra directories)   â”‚
â”‚     æ’ä»¶åŠ è½½çš„é¢å¤–ç›®å½•                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3 How Skills Enable Self-Evolution | æŠ€èƒ½å¦‚ä½•å¯ç”¨è‡ªè¿›åŒ–

**Key Insight**: Skills are **NOT** compiled code. They are **natural language instructions** that the LLM reads and executes.

**å…³é”®æ´å¯Ÿ**ï¼šæŠ€èƒ½**ä¸æ˜¯**ç¼–è¯‘ä»£ç ã€‚å®ƒä»¬æ˜¯ LLM è¯»å–å¹¶æ‰§è¡Œçš„**è‡ªç„¶è¯­è¨€æŒ‡ä»¤**ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User: "I need to track my wine cellar inventory"            â”‚
â”‚  ç”¨æˆ·ï¼š"æˆ‘éœ€è¦è·Ÿè¸ªæˆ‘çš„é…’çª–åº“å­˜"                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent checks existing skills â†’ No matching skill found      â”‚
â”‚  ä»£ç†æ£€æŸ¥ç°æœ‰æŠ€èƒ½ â†’ æœªæ‰¾åˆ°åŒ¹é…æŠ€èƒ½                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent creates new skill: ~/clawd/skills/wine-cellar/        â”‚
â”‚  â”œâ”€ SKILL.md (with YAML frontmatter + instructions)          â”‚
â”‚  â”œâ”€ references/wine-types.md (optional docs)                 â”‚
â”‚  â””â”€ scripts/inventory.py (optional helper script)            â”‚
â”‚  ä»£ç†åˆ›å»ºæ–°æŠ€èƒ½                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent writes SKILL.md:                                      â”‚
â”‚  ---                                                          â”‚
â”‚  name: wine_cellar                                            â”‚
â”‚  description: Track wine cellar inventory, ratings, drinking â”‚
â”‚               windows, and purchase history.                  â”‚
â”‚  ---                                                          â”‚
â”‚  # Wine Cellar Skill                                          â”‚
â”‚  Store inventory in ~/clawd/wine-cellar/INVENTORY.md...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Future requests: "What wines should I drink this year?"     â”‚
â”‚  â†’ Agent matches description â†’ Loads wine_cellar skill        â”‚
â”‚  â†’ Follows instructions in SKILL.md                           â”‚
â”‚  æœªæ¥è¯·æ±‚ï¼š"æˆ‘ä»Šå¹´åº”è¯¥å–ä»€ä¹ˆé…’ï¼Ÿ"                              â”‚
â”‚  â†’ ä»£ç†åŒ¹é…æè¿° â†’ åŠ è½½ wine_cellar æŠ€èƒ½                       â”‚
â”‚  â†’ éµå¾ª SKILL.md ä¸­çš„æŒ‡ä»¤                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. The Plugin System: Extending Core Capabilities | æ’ä»¶ç³»ç»Ÿï¼šæ‰©å±•æ ¸å¿ƒèƒ½åŠ›

Plugins are **TypeScript modules** that run in-process with the Gateway:

æ’ä»¶æ˜¯**ä¸ Gateway åŒè¿›ç¨‹è¿è¡Œçš„ TypeScript æ¨¡å—**ï¼š

```typescript
// Example plugin: extensions/voice-call/index.ts
export default function (api) {
  // Register a new tool
  api.registerTool({
    name: "voice_call",
    description: "Make a voice call via Twilio",
    parameters: {
      type: "object",
      properties: {
        to: { type: "string" },
        message: { type: "string" }
      }
    },
    async execute(id, params) {
      // Implementation
      return { content: [{ type: "text", text: "Call initiated" }] };
    }
  });

  // Register a CLI command
  api.registerCommand({
    name: "voicecall",
    description: "Voice call commands",
    handler: (ctx) => ({ text: "Voice call status: active" })
  });

  // Register a Gateway RPC method
  api.registerRpc("voicecall.status", async () => {
    return { status: "ready" };
  });

  // Register a channel (messaging integration)
  api.registerChannel({ plugin: channelPlugin });
}
```

#### Plugin Discovery Order | æ’ä»¶å‘ç°é¡ºåº

```
1. plugins.load.paths[]           # Config-specified paths (é…ç½®æŒ‡å®šè·¯å¾„)
2. <workspace>/.openclaw/extensions/*.ts   # Workspace extensions (å·¥ä½œåŒºæ‰©å±•)
3. ~/.openclaw/extensions/*.ts     # Global extensions (å…¨å±€æ‰©å±•)
4. <openclaw>/extensions/*         # Bundled extensions (å†…ç½®æ‰©å±•)
```

---

### 5. Tool System: The Agent's "Hands" | å·¥å…·ç³»ç»Ÿï¼šä»£ç†çš„"æ‰‹"

OpenClaw provides **built-in tools** that the LLM can call:

OpenClaw æä¾› LLM å¯è°ƒç”¨çš„**å†…ç½®å·¥å…·**ï¼š

| Tool Group | Tools | Description |
|------------|-------|-------------|
| `group:fs` | `read`, `write`, `edit`, `apply_patch` | File system operations (æ–‡ä»¶ç³»ç»Ÿæ“ä½œ) |
| `group:runtime` | `exec`, `bash`, `process` | Command execution (å‘½ä»¤æ‰§è¡Œ) |
| `group:web` | `web_search`, `web_fetch` | Web access (ç½‘é¡µè®¿é—®) |
| `group:ui` | `browser`, `canvas` | Browser automation, UI rendering (æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€UI æ¸²æŸ“) |
| `group:memory` | `memory_search`, `memory_get` | Memory retrieval (è®°å¿†æ£€ç´¢) |
| `group:sessions` | `sessions_list`, `sessions_send`, `sessions_spawn` | Multi-session management (å¤šä¼šè¯ç®¡ç†) |
| `group:automation` | `cron`, `gateway` | Scheduling, gateway control (è°ƒåº¦ã€ç½‘å…³æ§åˆ¶) |
| `group:messaging` | `message` | Cross-channel messaging (è·¨é¢‘é“æ¶ˆæ¯) |
| `group:nodes` | `nodes` | Mobile device control (ç§»åŠ¨è®¾å¤‡æ§åˆ¶) |

---

### 6. Memory System: Persistent Context | è®°å¿†ç³»ç»Ÿï¼šæŒä¹…åŒ–ä¸Šä¸‹æ–‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DUAL-LAYER MEMORY ARCHITECTURE                              â”‚
â”‚  åŒå±‚è®°å¿†æ¶æ„                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: Daily Logs (Short-term)                            â”‚
â”‚  ç¬¬ä¸€å±‚ï¼šæ¯æ—¥æ—¥å¿—ï¼ˆçŸ­æœŸï¼‰                                      â”‚
â”‚  Path: ~/clawd/memory/YYYY-MM-DD.md                          â”‚
â”‚  Content: Day-to-day context, temporary info, running tasks  â”‚
â”‚  å†…å®¹ï¼šæ—¥å¸¸ä¸Šä¸‹æ–‡ã€ä¸´æ—¶ä¿¡æ¯ã€è¿›è¡Œä¸­çš„ä»»åŠ¡                       â”‚
â”‚  Loaded: Today + Yesterday (automatic)                       â”‚
â”‚  åŠ è½½ï¼šä»Šå¤© + æ˜¨å¤©ï¼ˆè‡ªåŠ¨ï¼‰                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: Curated Memory (Long-term)                         â”‚
â”‚  ç¬¬äºŒå±‚ï¼šç²¾é€‰è®°å¿†ï¼ˆé•¿æœŸï¼‰                                      â”‚
â”‚  Path: ~/clawd/MEMORY.md                                     â”‚
â”‚  Content: Decisions, preferences, durable facts              â”‚
â”‚  å†…å®¹ï¼šå†³ç­–ã€åå¥½ã€æŒä¹…äº‹å®                                    â”‚
â”‚  Loaded: Only in main private sessions                       â”‚
â”‚  åŠ è½½ï¼šä»…åœ¨ä¸»ç§äººä¼šè¯ä¸­                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HYBRID VECTOR SEARCH (Optional via plugins)                 â”‚
â”‚  æ··åˆå‘é‡æœç´¢ï¼ˆé€šè¿‡æ’ä»¶å¯é€‰ï¼‰                                  â”‚
â”‚  â”œâ”€ 70% Vector similarity (OpenAI/Gemini embeddings)         â”‚
â”‚  â”‚   70% å‘é‡ç›¸ä¼¼åº¦ï¼ˆOpenAI/Gemini åµŒå…¥ï¼‰                     â”‚
â”‚  â”œâ”€ 30% BM25 keyword relevance                               â”‚
â”‚  â”‚   30% BM25 å…³é”®è¯ç›¸å…³æ€§                                    â”‚
â”‚  â””â”€ Stored in SQLite via sqlite-vec                          â”‚
â”‚     é€šè¿‡ sqlite-vec å­˜å‚¨åœ¨ SQLite ä¸­                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7. Self-Evolution Mechanisms | è‡ªè¿›åŒ–æœºåˆ¶

#### 7.1 Skill Auto-Creation | æŠ€èƒ½è‡ªåŠ¨åˆ›å»º

When facing an unknown task, the agent can:

é¢å¯¹æœªçŸ¥ä»»åŠ¡æ—¶ï¼Œä»£ç†å¯ä»¥ï¼š

1. **Analyze the problem** â†’ Break down requirements (åˆ†æé—®é¢˜ â†’ åˆ†è§£éœ€æ±‚)
2. **Design a solution** â†’ Create SKILL.md with instructions (è®¾è®¡è§£å†³æ–¹æ¡ˆ â†’ åˆ›å»ºå¸¦æŒ‡ä»¤çš„ SKILL.md)
3. **Implement helpers** â†’ Write scripts if needed (å®ç°è¾…åŠ©å·¥å…· â†’ å¦‚éœ€åˆ™ç¼–å†™è„šæœ¬)
4. **Test and refine** â†’ Execute and fix issues (æµ‹è¯•å’Œä¼˜åŒ– â†’ æ‰§è¡Œå¹¶ä¿®å¤é—®é¢˜)
5. **Persist the skill** â†’ Save for future use (æŒä¹…åŒ–æŠ€èƒ½ â†’ ä¿å­˜ä¾›å°†æ¥ä½¿ç”¨)

#### 7.2 Workflow Crystallization (via OpenClaw Foundry) | å·¥ä½œæµç»“æ™¶ï¼ˆé€šè¿‡ OpenClaw Foundryï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRACK: Every goal â†’ tool sequence â†’ outcome                 â”‚
â”‚  è·Ÿè¸ªï¼šæ¯ä¸ªç›®æ ‡ â†’ å·¥å…·åºåˆ— â†’ ç»“æœ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EXTRACT: Keywords from goals, calculate success rates       â”‚
â”‚  æå–ï¼šä»ç›®æ ‡æå–å…³é”®è¯ï¼Œè®¡ç®—æˆåŠŸç‡                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CRYSTALLIZE: High-value patterns (5+ uses, 70%+ success)    â”‚
â”‚               â†’ Auto-generate dedicated tools                 â”‚
â”‚  ç»“æ™¶ï¼šé«˜ä»·å€¼æ¨¡å¼ï¼ˆ5+ æ¬¡ä½¿ç”¨ï¼Œ70%+ æˆåŠŸç‡ï¼‰                    â”‚
â”‚        â†’ è‡ªåŠ¨ç”Ÿæˆä¸“ç”¨å·¥å…·                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DEPLOY: After sandbox validation                            â”‚
â”‚  éƒ¨ç½²ï¼šæ²™ç›’éªŒè¯å                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.3 The Overseer Pattern | ç›‘ç£è€…æ¨¡å¼

```typescript
// Runs autonomously every hour
// æ¯å°æ—¶è‡ªåŠ¨è¿è¡Œ
const overseer = {
  tasks: [
    "Identify crystallization candidates",  // è¯†åˆ«ç»“æ™¶å€™é€‰
    "Auto-generate tools from patterns",    // ä»æ¨¡å¼è‡ªåŠ¨ç”Ÿæˆå·¥å…·
    "Prune stale patterns (30+ days)",      // ä¿®å‰ªé™ˆæ—§æ¨¡å¼ï¼ˆ30+ å¤©ï¼‰
    "Track tool performance metrics",       // è·Ÿè¸ªå·¥å…·æ€§èƒ½æŒ‡æ ‡
    "Report actions taken"                  // æŠ¥å‘Šå·²é‡‡å–çš„æ“ä½œ
  ]
};
```

---

### 8. Security Architecture | å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  THREE-LAYER SECURITY MODEL                                  â”‚
â”‚  ä¸‰å±‚å®‰å…¨æ¨¡å‹                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: Sandbox (Docker)                                   â”‚
â”‚  ç¬¬ä¸€å±‚ï¼šæ²™ç›’ï¼ˆDockerï¼‰                                       â”‚
â”‚  â”œâ”€ Isolated filesystem (åªè¯»/è¯»å†™/æ— )                       â”‚
â”‚  â”œâ”€ Network restrictions                                     â”‚
â”‚  â”œâ”€ Resource limits                                          â”‚
â”‚  â””â”€ Tool filtering per sandbox                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: Tool Policy (Allow/Deny Lists)                     â”‚
â”‚  ç¬¬äºŒå±‚ï¼šå·¥å…·ç­–ç•¥ï¼ˆå…è®¸/æ‹’ç»åˆ—è¡¨ï¼‰                            â”‚
â”‚  â”œâ”€ Global: tools.allow / tools.deny                         â”‚
â”‚  â”œâ”€ Per-agent: agents.list[].tools.allow/deny                â”‚
â”‚  â””â”€ Sandbox: tools.sandbox.tools.allow/deny                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 3: Elevated Mode (Host Access)                        â”‚
â”‚  ç¬¬ä¸‰å±‚ï¼šæå‡æ¨¡å¼ï¼ˆä¸»æœºè®¿é—®ï¼‰                                  â”‚
â”‚  â”œâ”€ tools.elevated.enabled: true/false                       â”‚
â”‚  â”œâ”€ tools.elevated.allowFrom: per-channel whitelist          â”‚
â”‚  â”‚   æ¯ä¸ªé¢‘é“çš„ç™½åå•                                         â”‚
â”‚  â””â”€ Both global AND per-agent must allow                     â”‚
â”‚     å…¨å±€å’Œæ¯ä¸ªä»£ç†éƒ½å¿…é¡»å…è®¸                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 9. Key Design Principles for Your Own Agent | è®¾è®¡ä½ è‡ªå·±çš„ä»£ç†çš„å…³é”®åŸåˆ™

| Principle | Implementation | åŸåˆ™ | å®ç° |
|-----------|----------------|------|------|
| **Files as Source of Truth** | Everything in Markdown/JSON | **æ–‡ä»¶å³çœŸç›¸æ¥æº** | ä¸€åˆ‡ç”¨ Markdown/JSON |
| **Natural Language Skills** | SKILL.md with YAML frontmatter | **è‡ªç„¶è¯­è¨€æŠ€èƒ½** | å¸¦ YAML å‰ç½®å…ƒæ•°æ®çš„ SKILL.md |
| **Hierarchical Loading** | Workspace â†’ Local â†’ Bundled | **åˆ†å±‚åŠ è½½** | å·¥ä½œåŒº â†’ æœ¬åœ° â†’ å†…ç½® |
| **Plugin Extensibility** | TypeScript modules at runtime | **æ’ä»¶å¯æ‰©å±•æ€§** | è¿è¡Œæ—¶ TypeScript æ¨¡å— |
| **Tool Grouping** | Logical groups with allow/deny | **å·¥å…·åˆ†ç»„** | å¸¦å…è®¸/æ‹’ç»çš„é€»è¾‘ç»„ |
| **Memory Layering** | Short-term logs + Long-term curated | **è®°å¿†åˆ†å±‚** | çŸ­æœŸæ—¥å¿— + é•¿æœŸç²¾é€‰ |
| **Self-Documentation** | Skills explain themselves | **è‡ªæ–‡æ¡£åŒ–** | æŠ€èƒ½è‡ªæˆ‘è§£é‡Š |
| **Sandbox by Default** | Docker isolation for safety | **é»˜è®¤æ²™ç›’** | Docker éš”ç¦»ä»¥ä¿è¯å®‰å…¨ |

---

### 10. How to Implement Self-Evolution | å¦‚ä½•å®ç°è‡ªè¿›åŒ–

Based on OpenClaw's design, here's a blueprint:

åŸºäº OpenClaw çš„è®¾è®¡ï¼Œä»¥ä¸‹æ˜¯è“å›¾ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1: CORE RUNTIME                                       â”‚
â”‚  ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒè¿è¡Œæ—¶                                          â”‚
â”‚  â”œâ”€ Implement tool system (read/write/edit/exec/browser)     â”‚
â”‚  â”‚  å®ç°å·¥å…·ç³»ç»Ÿ                                               â”‚
â”‚  â”œâ”€ Build prompt assembly engine                             â”‚
â”‚  â”‚  æ„å»ºæç¤ºç»„è£…å¼•æ“                                           â”‚
â”‚  â”œâ”€ Create session management                                â”‚
â”‚  â”‚  åˆ›å»ºä¼šè¯ç®¡ç†                                               â”‚
â”‚  â””â”€ Design file-based memory                                 â”‚
â”‚     è®¾è®¡åŸºäºæ–‡ä»¶çš„è®°å¿†                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PHASE 2: SKILL SYSTEM                                       â”‚
â”‚  ç¬¬äºŒé˜¶æ®µï¼šæŠ€èƒ½ç³»ç»Ÿ                                            â”‚
â”‚  â”œâ”€ Define SKILL.md format with YAML frontmatter             â”‚
â”‚  â”‚  å®šä¹‰å¸¦ YAML å‰ç½®å…ƒæ•°æ®çš„ SKILL.md æ ¼å¼                     â”‚
â”‚  â”œâ”€ Build skill discovery and loading                        â”‚
â”‚  â”‚  æ„å»ºæŠ€èƒ½å‘ç°å’ŒåŠ è½½                                         â”‚
â”‚  â”œâ”€ Implement skill metadata injection                       â”‚
â”‚  â”‚  å®ç°æŠ€èƒ½å…ƒæ•°æ®æ³¨å…¥                                         â”‚
â”‚  â””â”€ Create skill auto-generation capability                  â”‚
â”‚     åˆ›å»ºæŠ€èƒ½è‡ªåŠ¨ç”Ÿæˆèƒ½åŠ›                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PHASE 3: PLUGIN ARCHITECTURE                                â”‚
â”‚  ç¬¬ä¸‰é˜¶æ®µï¼šæ’ä»¶æ¶æ„                                            â”‚
â”‚  â”œâ”€ Design plugin API (registerTool, registerCommand, etc.)  â”‚
â”‚  â”‚  è®¾è®¡æ’ä»¶ API                                               â”‚
â”‚  â”œâ”€ Implement plugin loading system                          â”‚
â”‚  â”‚  å®ç°æ’ä»¶åŠ è½½ç³»ç»Ÿ                                           â”‚
â”‚  â”œâ”€ Build channel abstraction for messaging                  â”‚
â”‚  â”‚  ä¸ºæ¶ˆæ¯æ„å»ºé¢‘é“æŠ½è±¡                                         â”‚
â”‚  â””â”€ Create security sandbox for plugins                      â”‚
â”‚     ä¸ºæ’ä»¶åˆ›å»ºå®‰å…¨æ²™ç›’                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PHASE 4: SELF-IMPROVEMENT                                   â”‚
â”‚  ç¬¬å››é˜¶æ®µï¼šè‡ªæˆ‘æ”¹è¿›                                            â”‚
â”‚  â”œâ”€ Track tool usage patterns                                â”‚
â”‚  â”‚  è·Ÿè¸ªå·¥å…·ä½¿ç”¨æ¨¡å¼                                           â”‚
â”‚  â”œâ”€ Analyze successful workflows                             â”‚
â”‚  â”‚  åˆ†ææˆåŠŸçš„å·¥ä½œæµ                                           â”‚
â”‚  â”œâ”€ Auto-generate skills from patterns                       â”‚
â”‚  â”‚  ä»æ¨¡å¼è‡ªåŠ¨ç”ŸæˆæŠ€èƒ½                                         â”‚
â”‚  â”œâ”€ Validate in sandbox before deployment                    â”‚
â”‚  â”‚  éƒ¨ç½²å‰åœ¨æ²™ç›’ä¸­éªŒè¯                                         â”‚
â”‚  â””â”€ Periodically prune unused capabilities                   â”‚
â”‚     å®šæœŸä¿®å‰ªæœªä½¿ç”¨çš„èƒ½åŠ›                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Summary | æ€»ç»“

OpenClaw's genius lies in its **simplicity and transparency**:

OpenClaw çš„ç²¾å¦™ä¹‹å¤„åœ¨äºå…¶**ç®€æ´å’Œé€æ˜**ï¼š

1. **Everything is files** â€” You can see and edit exactly what the AI knows (ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶â€”â€”ä½ å¯ä»¥å‡†ç¡®çœ‹åˆ°å¹¶ç¼–è¾‘ AI çŸ¥é“çš„å†…å®¹)
2. **Natural language skills** â€” No coding required to teach new capabilities (è‡ªç„¶è¯­è¨€æŠ€èƒ½â€”â€”æ•™æˆæ–°èƒ½åŠ›æ— éœ€ç¼–ç )
3. **Hierarchical override** â€” Workspace skills beat global skills (åˆ†å±‚è¦†ç›–â€”â€”å·¥ä½œåŒºæŠ€èƒ½ä¼˜å…ˆäºå…¨å±€æŠ€èƒ½)
4. **Plugin extensibility** â€” Add channels, tools, commands via TypeScript (æ’ä»¶å¯æ‰©å±•æ€§â€”â€”é€šè¿‡ TypeScript æ·»åŠ é¢‘é“ã€å·¥å…·ã€å‘½ä»¤)
5. **Self-evolving** â€” The agent can write its own skills when needed (è‡ªè¿›åŒ–â€”â€”ä»£ç†å¯ä»¥åœ¨éœ€è¦æ—¶ç¼–å†™è‡ªå·±çš„æŠ€èƒ½)

This architecture makes it possible for an AI agent to **learn and grow** without human intervention, while remaining **fully transparent and controllable**.

è¿™ç§æ¶æ„ä½¿ AI ä»£ç†èƒ½å¤Ÿåœ¨**æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹å­¦ä¹ å’Œæˆé•¿**ï¼ŒåŒæ—¶ä¿æŒ**å®Œå…¨é€æ˜å’Œå¯æ§**ã€‚
